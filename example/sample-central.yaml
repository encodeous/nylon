dist:
  # This is the central distribution public key. Although it is a "public" key, it is also used as a shared secret within the network, so that no outsiders can decrypt the distributed configuration.
  key: 7PaN6DmAayz4KnDnsXSXJH+Oy0TFGeoM4FEbQfLriVY=
  # Nylon will frequently check these repos/files for updates
  repos:
    - file:central.nybundle # use local file system
    - https://static.example.com/network1.nybundle # GET from a server
routers:
  - id: alice
    pubkey: xmfAovAKN4AY5ocK5s+/VsG9I27KrQ13Vzb0HOsLKAs==
    addresses: [10.0.0.1] # this is the primary address of the nylon interface, it will be used when sending out packets from the interface
    prefixes:
      - type: static # here, we define a static prefix advertisement
        prefix: 192.168.0.0/24 # you can advertise a prefix as well. make sure to exclude this on nodes where it could overlap!
        metric: 0 # optional advertisement metric, default is 0
      - type: ping # the ping prefix healthcheck will periodically ping the specified address, and advertise the prefix with metric according to the RTT of the ping. If the ping fails more than max_failures times, the prefix will not be advertised.
        prefix: 10.1.0.0/24
        addr: 10.1.0.8 # address to ping
        delay: 10s
        max_failures: 3
        bind_if: en10 # optional bind, if empty, we bind to all interfaces
        # metric: 0 # optional metric, if set, this will be used instead of RTT
      - type: http # similar to the http prefix, but uses an HTTP GET request to determine prefix health. the duration of the GET request is used as the metric.
        prefix: 10.2.0.0/24
        url: http://example.com/healthz # will expect a success response
        delay: 15s
        metric: 5 # optional static metric, overrides the GET duration
  - id: bob
    pubkey: 4GfHHSyVpXc+wkbjyIIONERa6Xf5EafB0nVGZLf2r2o=
    addresses: [10.0.0.2, 10.1.0.2] # you can advertise multiple addresses
    endpoints:
      - '192.168.1.1:57175'
      - 'nylon.example.org' # nylon will re-resolve this domain frequently to check for updates.
  - id: eve
    pubkey: 2mXTTD+FYdtJm/v1vSHz8qimvCucjW9vY+nLYacXJFE=
    addresses: [10.0.0.3]
  - id: public
    pubkey: dJcUE1qnXCQ5x8pMhFb/MZab7YrBaaHcrgfbmQI0MW4=
    addresses: [10.0.0.4]
    endpoints:
      - '123.123.123.123:57175' # nylon supports multiple endpoints, picking the best endpoint dynamically
      - '123.123.123.124:57175'
  - id: charlie
    pubkey: WcCkKijU0brYnRzxk867HTDyYFf/cqiKTTOLSxtWoFc=
    addresses: [10.0.0.5]
clients: # external "vanilla" WireGuard clients must be defined separately
  - id: client1
    pubkey: SBI+yvF30Ba4xo0GKTtKHSSfbXAnRNFTBwydJyJp6Rk=
    addresses: [10.0.0.7]
    prefixes: # these prefixes will be advertised by the gateway which this client connects to
      - type: static
        prefix: 192.168.1.0/24 # clients may also advertise prefixes, just make sure it's also added in the allowed ips in the WireGuard config
exclude_ips: # split tunnel, default excluded ip ranges for the whole network, if empty, all advertised prefixes will be included
  - 192.168.0.0/24
graph: # The graph determines which nodes will attempt/can peer with each other. Nodes will only connect to each other once they have been connected directly in the graph.
  - Group1 = alice, bob # Groups are a convenient way to connect many nodes. Nodes within groups are not automatically connected
  - Group1, Group1 # You can emulate that behaviour by connecting a group to its self
  - Group2 = Group1, client1 # You can use groups within groups
  - client1, eve, alice # Here, client1, eve and alice will all connect to each other
timestamp: 1740832962209309000 # The timestamp is updated by "nylon seal" and is used as a version number when checking for config updates.